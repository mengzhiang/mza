/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("suggest",function(f,n){function l(a,b,c){if(!(this instanceof l))return new l(a,b,c);this.textInput=f.get(a);this.config=c=f.merge(z,c);b+=b.indexOf("?")===-1?"?":"&";this.dataSource=b+c.callbackName+"="+(a=c.callbackFn);if(a!==u){c=a;a=c.split(".");b=a.length;if(b>1){c=c.replace(/^(.*)\..+$/,"$1");c=f.namespace(c,true);c[a[b-1]]=r}else s[c]=r}this.queryParams=this.query=k;this._dataCache={};this._init()}function v(a,b){if(b.nodeType===1){d.html(a,k);a.appendChild(b)}else d.html(a,b)}function r(a){l.focusInstance&&
f.later(function(){l.focusInstance._handleResponse(a)},0)}var d=f.DOM,j=f.Event,s=window,o=document,p,w=f.get("head"),q=f.UA.ie,x=q>=9,u="KISSY.Suggest.callback",k="",y=parseInt,A=/^(?:input|button|a)$/i,z={containerCls:k,resultFormat:"%result%",closeBtnText:"\u5173\u95ed",shim:q===6,submitOnSelect:true,offset:-1,charset:"utf-8",callbackName:"callback",callbackFn:u,queryName:"q"};f.augment(l,f.EventTarget,{_init:function(){p=o.body;this._initTextInput();this._initContainer();this.config.shim&&this._initShim();
this._initStyle();this._initEvent()},_initTextInput:function(){var a=this,b=a.textInput,c=false,e=0;d.attr(b,"autocomplete","off");a.config.autoFocus&&b.focus();j.on(b,"keydown",function(h){var i=h.keyCode;if(i==35||i==36)if(!b.value){h.halt();return}if(i===27){a.hide();b.value=a.query}else if(i>32&&i<41)if(b.value){if(i===40||i===38){if(e++===0){a._isRunning&&a.stop();c=true;a._selectItem(i===40)}else if(e==3)e=0;h.preventDefault()}}else b.blur();else if(i===13){b.blur();if(c)if(b.value==a._getSelectedItemKey())if(a.fire("itemSelect")===
false)return;a._submitForm()}else{a._isRunning||a.start();c=false}});j.on(b,"keyup",function(){e=0});j.on(b,"blur",function(){a.stop();f.later(function(){a._focusing||a.hide()},0)})},_initContainer:function(){var a=this.config.containerCls;a=d.create("<div>",{"class":"ks-suggest-container"+(a?" "+a:k),style:"position:absolute;visibility:hidden"});var b=d.create("<div>",{"class":"ks-suggest-content"}),c=d.create("<div>",{"class":"ks-suggest-footer"});a.appendChild(b);a.appendChild(c);p.insertBefore(a,
p.firstChild);this.container=a;this.content=b;this.footer=c;this._initContainerEvent()},_setContainerRegion:function(){var a=this.config,b=this.textInput,c=d.offset(b),e=this.container;d.offset(e,{left:c.left,top:c.top+b.offsetHeight+a.offset});d.width(e,a.containerWidth||b.offsetWidth-2)},_initContainerEvent:function(){var a=this,b=a.textInput,c=a.container,e=a.content,h=a.footer,i,t;j.on(e,"mousemove",function(g){g=g.target;if(g.nodeName!=="LI")g=d.parent(g,"li");if(d.contains(e,g))if(g!==a.selectedItem){a._removeSelectedItem();
a._setSelectedItem(g)}});j.on(e,"mousedown",function(g){g=g.target;if(g.nodeName!=="LI")g=d.parent(g,"li");i=g});j.on(c,"mousedown",function(g){if(!A.test(g.target.nodeName)){b.onbeforedeactivate=function(){s.event.returnValue=false;b.onbeforedeactivate=null};g.preventDefault()}});j.on(e,"mouseup",function(g){var m=g.target;if(!(g.which>2)){if(m.nodeName!=="LI")m=d.parent(m,"li");if(m==i)if(d.contains(e,m)){a._updateInputFromSelectItem(m);if(a.fire("itemSelect")!==false){try{b.blur()}catch(B){}a._submitForm()}}}});
j.on(h,"focusin",function(){a._focusing=true;a._removeSelectedItem();t=false});j.on(h,"focusout",function(){a._focusing=false;f.later(function(){if(t)a.hide();else a._focusing||a.textInput.focus()},0)});j.on(a.container,"mouseleave",function(){t=true});j.on(h,"click",function(g){d.hasClass(g.target,"ks-suggest-closebtn")&&a.hide()})},_submitForm:function(){if(this.config.submitOnSelect){var a=this.textInput.form;if(a)if(this.fire("beforeSubmit",{form:a})!==false){if(o.createEvent){var b=o.createEvent("MouseEvents");
b.initEvent("submit",true,false);a.dispatchEvent(b)}else o.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_initShim:function(){var a=d.create("<iframe>",{src:"about:blank","class":"ks-suggest-shim",style:"position:absolute;visibility:hidden;border:none"});this.container.shim=a;p.insertBefore(a,p.firstChild)},_setShimRegion:function(){var a=this.container,b=a.style,c=a.shim;c&&d.css(c,{left:y(b.left)-2,top:b.top,width:y(b.width)+2,height:d.height(a)-2})},_initStyle:function(){f.get("#ks-suggest-style")||
d.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container .ks-selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container .ks-selected span{color:#FFF;cursor:default}.ks-suggest-footer{padding:0 5px 5px}.ks-suggest-closebtn{float:right}.ks-suggest-container li,.ks-suggest-footer{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initEvent:function(){var a=this;j.on(s,"resize",function(){a._setContainerRegion();a._setShimRegion()})},start:function(){var a=this;if(a.fire("beforeStart")!==false){l.focusInstance=a;a._timer=f.later(function(){a._updateContent();a._timer=f.later(arguments.callee,200)},200);a._isRunning=true}},stop:function(){l.focusInstance=n;this._timer&&this._timer.cancel();this._isRunning=false},show:function(){if(!this.isVisible()){var a=this.container,b=a.shim;this._setContainerRegion();
a.style.visibility=k;if(b){this._setShimRegion();b.style.visibility=k}}},hide:function(){if(this.isVisible()){var a=this.container,b=a.shim;if(b)b.style.visibility="hidden";a.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},_updateContent:function(){var a=this.textInput;if(a.value!=this.query){a=this.query=a.value;if(f.trim(a))if(this._dataCache[a]!==n){this._fillContainer(this._dataCache[a]);this._displayContainer()}else this._requestData();else{this._fillContainer();
this.hide()}}},_requestData:function(){var a=this,b=a.config,c;if(!q||x)a.dataScript=n;if(!a.dataScript){c=o.createElement("script");c.charset=b.charset;c.async=true;w.insertBefore(c,w.firstChild);a.dataScript=c;if(!q||x){var e=f.now();a._latestScriptTime=e;d.attr(c,"data-time",e);j.on(c,"load",function(){a._scriptDataIsOut=d.attr(c,"data-time")!=a._latestScriptTime})}}a.queryParams=b.queryName+"="+encodeURIComponent(a.query);if(a.fire("beforeDataRequest")!==false)a.dataScript.src=a.dataSource+"&"+
a.queryParams},_handleResponse:function(a){var b=k,c,e,h,i;if(!this._scriptDataIsOut){this.returnedData=a;if(this.fire("dataReturn",{data:a})!==false){a=this._formatData(this.returnedData);if((c=a.length)>0){e=d.create("<ol>");for(b=0;b<c;++b){h=a[b];h=this._formatItem(i=h.key,h.result);d.attr(h,"key",i);d.addClass(h,b%2?"ks-even":"ks-odd");e.appendChild(h)}b=e}this._fillContainer(b);if(this.fire("beforeShow")!==false){this._dataCache[this.query]=d.html(this.content);this._displayContainer()}}}},
_formatData:function(a){var b=[],c,e,h,i=0;if(!a)return b;if(f.isArray(a.result))a=a.result;if(!(c=a.length))return b;for(h=0;h<c;++h){e=a[h];if(f.isString(e))b[i++]={key:e};else if(f.isArray(e)&&e.length>1)b[i++]={key:e[0],result:e[1]}}return b},_formatItem:function(a,b){var c=d.create("<li>"),e;c.appendChild(d.create("<span>",{"class":"ks-suggest-key",html:a}));if(b){e=this.config.resultFormat.replace("%result%",b);f.trim(e)&&c.appendChild(d.create("<span>",{"class":"ks-suggest-result",html:e}))}return c},
_fillContainer:function(a,b){this._fillContent(a||k);this._fillFooter(b||k);this.isVisible()&&this._setShimRegion()},_fillContent:function(a){v(this.content,a);this.selectedItem=n},_fillFooter:function(a){var b=this.config,c=this.footer;v(c,a);b.closeBtn&&c.appendChild(d.create("<a>",{"class":"ks-suggest-closebtn",text:b.closeBtnText,href:"javascript: void(0)",target:"_self"}));this.fire("updateFooter",{footer:c,query:this.query});d.css(c,"display",d.text(c)?k:"none")},_displayContainer:function(){f.trim(d.text(this.container))?
this.show():this.hide()},_selectItem:function(a){var b=f.query("li",this.container);if(b.length!==0)if(this.isVisible()){if(this.selectedItem){a=d[a?"next":"prev"](this.selectedItem);if(!a)this.textInput.value=this.query}else a=b[a?0:b.length-1];this._removeSelectedItem();if(a){this._setSelectedItem(a);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){d.removeClass(this.selectedItem,"ks-selected");this.selectedItem=n},_setSelectedItem:function(a){d.addClass(a,"ks-selected");
this.selectedItem=a;this.textInput.focus()},_getSelectedItemKey:function(){if(!this.selectedItem)return k;return d.attr(this.selectedItem,"key")},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)||this.query}});l.version=1.1;l.callback=r;f.Suggest=l},{requires:["core"]});KISSY.add("anim-easing",function(c){var g=Math,f=g.PI,d=g.pow,a=g.sin,b=1.70158,e={easeNone:function(h){return h},easeIn:function(h){return h*h},easeOut:function(h){return(2-h)*h},easeBoth:function(h){return(h*=2)<1?0.5*h*h:0.5*(1-(--h)*(h-2))},easeInStrong:function(h){return h*h*h*h},easeOutStrong:function(h){return 1-(--h)*h*h*h},easeBothStrong:function(h){return(h*=2)<1?0.5*h*h*h*h:0.5*(2-(h-=2)*h*h*h)},elasticIn:function(h){var j=0.3,i=j/4;if(h===0||h===1){return h}return -(d(2,10*(h-=1))*a((h-i)*(2*f)/j))},elasticOut:function(h){var j=0.3,i=j/4;if(h===0||h===1){return h}return d(2,-10*h)*a((h-i)*(2*f)/j)+1},elasticBoth:function(h){var j=0.45,i=j/4;if(h===0||(h*=2)===2){return h}if(h<1){return -0.5*(d(2,10*(h-=1))*a((h-i)*(2*f)/j))}return d(2,-10*(h-=1))*a((h-i)*(2*f)/j)*0.5+1},backIn:function(h){if(h===1){h-=0.001}return h*h*((b+1)*h-b)},backOut:function(h){return(h-=1)*h*((b+1)*h+b)+1},backBoth:function(h){if((h*=2)<1){return 0.5*(h*h*(((b*=(1.525))+1)*h-b))}return 0.5*((h-=2)*h*(((b*=(1.525))+1)*h+b)+2)},bounceIn:function(h){return 1-e.bounceOut(1-h)},bounceOut:function(h){var i=7.5625,j;if(h<(1/2.75)){j=i*h*h}else{if(h<(2/2.75)){j=i*(h-=(1.5/2.75))*h+0.75}else{if(h<(2.5/2.75)){j=i*(h-=(2.25/2.75))*h+0.9375}else{j=i*(h-=(2.625/2.75))*h+0.984375}}}return j},bounceBoth:function(h){if(h<0.5){return e.bounceIn(h*2)*0.5}return e.bounceOut(h*2-1)*0.5+0.5}};e.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"};c.Easing=e});KISSY.add("anim",function(e,g){var u=e.DOM,b=e.Easing,f=parseFloat,c=u.create("<div>"),q=("backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex").split(" "),t=13,r="opacity",j="none",w="Property",v="start",k="step",i="complete",l={duration:1,easing:"easeNone",nativeSupport:true};function x(z,D,A,C,F,B){if(!(z=e.get(z))){return}if(!(this instanceof x)){return new x(z,D,A,C,F,B)}var G=this,E=e.isPlainObject(A),s=D,y;G.domEl=z;if(e.isPlainObject(s)){s=e.param(s,";").replace(/=/g,":").replace(/%23/g,"#").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}G.props=o(s);G.targetStyle=s;if(E){y=e.merge(l,A)}else{y=e.clone(l);if(A){(y.duration=f(A)||1)}if(e.isString(C)||e.isFunction(C)){y.easing=C}if(e.isFunction(F)){y.complete=F}if(B!==g){y.nativeSupport=B}}G.config=y;if(y.nativeSupport&&p()&&e.isString((C=y.easing))){if(/cubic-bezier\([\s\d.,]+\)/.test(C)||(C=b.NativeTimeFunction[C])){y.easing=C;G.transitionName=p()}}if(e.isFunction(F)){G.on(i,F)}}e.augment(x,e.EventTarget,{run:function(){var H=this,A=H.config,B=H.domEl,D,F,z,G,E=H.props,s={},y,C;for(y in E){s[y]=n(u.css(B,y))}if(H.fire(v)===false){return}H.stop();if(H.transitionName){H._nativeRun()}else{D=A.duration*1000;z=e.now();G=z+D;F=A.easing;if(e.isString(F)){F=b[F]||b.easeNone}H.timer=e.later((C=function(){var L=e.now(),J=L>G?1:(L-z)/D,K,M,I;for(y in E){K=s[y];M=E[y];if(M.v==0){M.u=K.u}if(K.u!==M.u){K.v=0}u.css(B,y,M.f(K.v,M.v,F(J))+M.u)}if((H.fire(k)===false)||(I=L>G)){H.stop();if(I){H.fire(i)}}}),t,true);C()}return H},_nativeRun:function(){var s=this,y=s.config,z=s.domEl,C=s.props,B=y.duration*1000,E=y.easing,A=s.transitionName,D={};e.log("Amin uses native transition.");D[A+"Property"]="all";D[A+"Duration"]=B+"ms";D[A+"TimingFunction"]=E;u.css(z,D);e.later(function(){d(z,C,s.targetStyle)},0);e.later(function(){s.stop(true)},B)},stop:function(y){var s=this;if(s.transitionName){s._nativeStop(y)}else{if(s.timer){s.timer.cancel();s.timer=g}if(y){d(s.domEl,s.props,s.targetStyle);s.fire(i)}}return s},_nativeStop:function(y){var s=this,A=s.domEl,B=s.transitionName,z=s.props,C;if(y){u.css(A,B+w,j);s.fire(i)}else{for(C in z){u.css(A,C,u._getComputedStyle(A,C))}u.css(A,B+w,j)}}});x.supportTransition=function(){return !!p()};e.Anim=x;function p(){var s="transition",y;if(c.style[s]!==g){y=s}else{e.each(["Webkit","Moz","O"],function(z){if(c.style[(s=z+"Transition")]!==g){y=s;return false}})}p=function(){return y};return y}function d(z,y,s){if(e.UA.ie&&s.indexOf(r)>-1){u.css(z,r,y[r].v)}z.style.cssText+=";"+s}function o(A){var z,B={},y=q.length,s;c.innerHTML='<div style="'+A+'"></div>';z=c.firstChild.style;while(y--){if((s=z[q[y]])){B[q[y]]=n(s)}}return B}function n(z){var s=f(z),y=(z+"").replace(/^[-\d.]+/,"");return isNaN(s)?{v:y,u:"",f:a}:{v:s,u:y,f:h}}function h(s,y,z){return(s+(y-s)*z).toFixed(3)}function a(y,C,E){var A=2,z,D,B,F=[],s=[];while(z=3,D=arguments[A-1],A--){if(m(D,0,4)==="rgb("){D=D.match(/\d+/g);while(z--){F.push(~~D[z])}}else{if(m(D,0)==="#"){if(D.length===4){D="#"+m(D,1)+m(D,1)+m(D,2)+m(D,2)+m(D,3)+m(D,3)}while(z--){F.push(parseInt(m(D,1+z*2,2),16))}}else{return C}}}while(z--){B=~~(F[z+3]+(F[z]-F[z+3])*E);s.push(B<0?0:B>255?255:B)}return"rgb("+s.join(",")+")"}function m(y,s,z){return y.substr(s,z||1)}});KISSY.add("anim-node-plugin",function(g,c){var p=g.DOM,l=g.Anim,f=g.Node.prototype,a=g.NodeList.prototype,e="display",k="none",h="overflow",b="hidden",i="opacity",j="height",n="width",o="auto",m={show:[h,i,j,n],fade:[i],slide:[h,j]};g.each([f,a],function(q){q.animate=function(){var r=g.makeArray(arguments);g.each(this,function(s){l.apply(c,[s].concat(r)).run()});return this};g.each({show:["show",1],hide:["show",0],toggle:["toggle"],fadeIn:["fade",1],fadeOut:["fade",0],slideDown:["slide",1],slideUp:["slide",0]},function(s,r){q[r]=function(t,u){if(p[r]&&arguments.length===0){p[r](this)}else{g.each(this,function(v){d(v,s[0],t,u,s[1])})}return this}})});function d(r,u,s,w,t){if(u==="toggle"){t=p.css(r,e)===k?1:0;u="show"}if(t){p.css(r,e,p.data(r,e)||"")}var v={},q={};g.each(m[u],function(x){if(x===h){v[h]=p.css(r,h);p.css(r,h,b)}else{if(x===i){v[i]=p.css(r,i);q.opacity=t?1:0;if(t){p.css(r,i,0)}}else{if(x===j){v[j]=p.css(r,j);q.height=(t?p.css(r,j)||r.naturalHeight:0);if(t){p.css(r,j,0)}}else{if(x===n){v[n]=p.css(r,n);q.width=(t?p.css(r,n)||r.naturalWidth:0);if(t){p.css(r,n,0)}}}}}});new g.Anim(r,q,s,"easeOut",function(){if(!t){var x=r.style,y=x[e];if(y!==k){if(y){p.data(r,e,y)}x[e]=k}if(v[j]){p.css(r,{height:v[j]})}if(v[n]){p.css(r,{width:v[n]})}if(v[i]){p.css(r,{opacity:v[i]})}if(v[h]){p.css(r,{overflow:v[h]})}}if(w&&g.isFunction(w)){w()}}).run()}});/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable",function(c){function h(b,a){a=a||{};if(!("markupType"in a))if(a.panelCls)a.markupType=1;else if(a.panels)a.markupType=2;for(var e=this.constructor;e;){a=c.merge(e.Config,a);e=e.superclass?e.superclass.constructor:null}this.container=l.get(b);this.config=a;this.activeIndex=this.completedIndex=a.activeIndex;if(!(this.activeIndex>-1))if(typeof a.switchTo!="number")this.completedIndex=this.activeIndex=0;this._init();this._initPlugins();this.fire(r);this.activeIndex>-1||typeof a.switchTo==
"number"&&this.switchTo(a.switchTo)}function n(b){var a={};a.type=b.originalEvent.type;a.target=b.originalEvent.target||b.originalEvent.srcElement;return{originalEvent:a}}var l=c.DOM,o=c.Event,t=c.EventTarget,r="init";h.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};
h.getDomEvent=n;h.Plugins=[];c.augment(h,t,{_initPlugins:function(){for(var b=this,a=b.constructor;a;){c.each(a.Plugins,function(e){e.init&&e.init(b)});a=a.superclass?a.superclass.constructor:null}},_init:function(){var b=this.config;this._parseMarkup();b.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var b=this.container,a=this.config,e,k,f=[],m=[];switch(a.markupType){case 0:if(e=l.get("."+a.navCls,b))f=l.children(e);k=l.get("."+a.contentCls,b);m=l.children(k);break;case 1:f=l.query("."+
a.triggerCls,b);m=l.query("."+a.panelCls,b);break;case 2:f=a.triggers;m=a.panels}b=m.length;this.length=b/a.steps;if(a.hasTriggers&&b>0&&f.length===0)f=this._generateTriggersMarkup(this.length);this.triggers=c.makeArray(f);this.panels=c.makeArray(m);this.content=k||m[0].parentNode;this.nav=e||a.hasTriggers&&f[0].parentNode},_generateTriggersMarkup:function(b){var a=this.config,e=l.create("<ul>"),k,f;e.className=a.navCls;for(f=0;f<b;f++){k=l.create("<li>");if(f===this.activeIndex)k.className=a.activeTriggerCls;
k.innerHTML=f+1;e.appendChild(k)}this.container.appendChild(e);return l.children(e)},_bindTriggers:function(){var b=this,a=b.config,e=b.triggers,k,f,m=e.length;for(f=0;f<m;f++)(function(s){k=e[s];o.on(k,"click",function(v){b._onFocusTrigger(s,v)});if(a.triggerType==="mouse"){o.on(k,"mouseenter",function(v){b._onMouseEnterTrigger(s,v)});o.on(k,"mouseleave",function(){b._onMouseLeaveTrigger(s)})}})(f)},_onFocusTrigger:function(b,a){if(this._triggerIsValid(b)){this._cancelSwitchTimer();this.switchTo(b,
undefined,n(a))}},_onMouseEnterTrigger:function(b,a){var e=this;if(e._triggerIsValid(b)){var k=n(a);e.switchTimer=c.later(function(){e.switchTo(b,undefined,k)},e.config.delay*1E3)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(b){return this.activeIndex!==b},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=undefined}},switchTo:function(b,a,e,k){var f=this,m=f.config,s=f.triggers,v=f.panels,w=f.activeIndex,q=m.steps,
p=w*q,z=b*q;if(!f._triggerIsValid(b))return f;if(f.fire("beforeSwitch",{toIndex:b})===false)return f;if(m.hasTriggers)f._switchTrigger(w>-1?s[w]:null,s[b]);if(a===undefined)a=b>w?"forward":"backward";f._switchView(w>-1?v.slice(p,p+q):null,v.slice(z,z+q),b,a,e,function(){k&&k.call(f,b);f.completedIndex=b});f.activeIndex=b;return f},_switchTrigger:function(b,a){var e=this.config.activeTriggerCls;b&&l.removeClass(b,e);l.addClass(a,e)},_switchView:function(b,a,e,k,f,m){b&&l.css(b,"display","none");l.css(a,
"display","block");this._fireOnSwitch(e,f);m&&m.call(this)},_fireOnSwitch:function(b,a){this.fire("switch",c.mix(a||{},{currentIndex:b}))},prev:function(b){var a=this.activeIndex;this.switchTo(a>0?a-1:this.length-1,"backward",b)},next:function(b){var a=this.activeIndex;this.switchTo(a<this.length-1?a+1:0,"forward",b)}});return c.Switchable=h},{requires:["core"]});
KISSY.add("switchable/aria",function(c,h,n,l){function o(){this.stop&&this.stop()}function t(){this.start&&this.start()}h=c.DOM;n=c.Event;l=c.Switchable;var r=!document.documentElement.hasAttribute?function(a,e){e=e.toLowerCase();var k=h.get(a).getAttributeNode(e);return!!(k&&k.specified)}:function(a,e){e=e.toLowerCase();return h.get(a).hasAttribute(e)};l.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var e=a.container;n.on(e,"focusin",o,a);n.on(e,"focusout",t,a)}}});var b=["a","input",
"button","object"];l.Aria={setTabIndex:function(a,e){a.tabIndex=e;h.query("*",a).each(function(k){var f=k.nodeName.toLowerCase();if(c.inArray(f,b)){r(k,"oriTabIndex")||h.attr(k,"oriTabIndex",k.tabIndex);k.tabIndex=e!=-1?h.attr(k,"oriTabIndex"):e}})}}},{host:"switchable"});
KISSY.add("switchable/accordion/base",function(c,h,n){function l(o,t){if(!(this instanceof l))return new l(o,t);l.superclass.constructor.apply(this,arguments);return 0}n=c.Switchable;h=c.DOM;c.extend(l,n,{_switchTrigger:function(o,t){var r=this.config;r.multiple?h.toggleClass(t,r.activeTriggerCls):l.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(o){return l.superclass._triggerIsValid.call(this,o)||this.config.multiple},_switchView:function(o,t,r,b,a,e){var k=t[0];if(this.config.multiple){h.toggle(k);
this._fireOnSwitch(r,a);e.call(this)}else l.superclass._switchView.apply(this,arguments)}});l.Plugins=[];l.Config={markupType:1,triggerType:"click",multiple:false};return c.Accordion=l},{host:"switchable"});
KISSY.add("switchable/accordion/aria",function(c,h,n){function l(i){var x;c.each(this.triggers,function(B){if(B==i||m.contains(B,i))x=B});return x}function o(i){switch(i.keyCode){case s:case v:i.ctrlKey&&!i.altKey&&!i.shiftKey&&i.halt();break;case g:i.ctrlKey&&!i.altKey&&i.halt()}}function t(i){var x=i.target,B=this.triggers,C=!i.ctrlKey&&!i.shiftKey&&!i.altKey,E=i.ctrlKey&&!i.shiftKey&&!i.altKey;switch(i.keyCode){case A:case u:if(l.call(this,x)&&C){this.switchTo(this.focusIndex);i.halt()}break;case p:case z:if(l.call(this,
x)){b.call(this);i.halt()}break;case d:case j:if(l.call(this,x)){a.call(this);i.halt()}break;case v:if(E){i.halt();a.call(this)}break;case s:if(E){i.halt();b.call(this)}break;case q:if(C){x=this.focusIndex;this.focusIndex=0;r.call(this,x,0,true);i.halt()}break;case w:if(C){x=B.length-1;B=this.focusIndex;this.focusIndex=x;r.call(this,B,x,true);i.halt()}break;case g:if(i.ctrlKey&&!i.altKey){i.halt();i.shiftKey?b.call(this):a.call(this)}}}function r(i,x,B){var C=this.triggers;if(typeof i=="number")var E=
C[i];i=C[x];if(E){y(E,"-1");m.removeClass(E,k);E.setAttribute("aria-selected","false")}B&&i.focus();y(i,"0");m.addClass(i,k);i.setAttribute("aria-selected","true")}function b(){var i=this.triggers,x=this.focusIndex;i=this.focusIndex=x==0?i.length-1:x-1;r.call(this,x,i,true)}function a(){var i=this.focusIndex,x=this.focusIndex=i==this.triggers.length-1?0:i+1;r.call(this,i,x,true)}function e(i){var x=!!(i.originalEvent.target||i.originalEvent.srcElement),B=this.config.multiple,C=this.completedIndex;
i=i.currentIndex;var E=this.triggers[i],F=this.panels[i];if(C>-1){var D=this.triggers[C];C=this.panels[C];y(D,"-1");x&&E.focus();if(!B){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}y(E,"0");x=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",x=="false"?"true":"false");E.setAttribute("aria-expanded",x=="false"?"false":"true");r.call(this,this.focusIndex,i);this.focusIndex=i}h=c.Switchable.Aria;n=c.Accordion;var k="ks-switchable-select",f=c.Event,m=c.DOM,s=
33,v=34,w=35,q=36,p=37,z=38,d=39,j=40,g=9,u=32,A=13;c.mix(n.Config,{aria:false});n.Plugins.push({name:"aria",init:function(i){if(i.config.aria){var x=i.container,B=i.activeIndex;m.attr(x,"aria-multiselectable",i.config.multiple?"true":"false");m.attr(x,"role","tablist");var C=i.triggers,E=i.panels,F=0;c.each(E,function(D){if(!D.id)D.id=c.guid("ks-switchable-tab-panel")});c.each(C,function(D){if(!D.id)D.id=c.guid("ks-switchable-tab")});c.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",
B==F?"true":"false");D.setAttribute("aria-selected",B==F?"true":"false");D.setAttribute("aria-controls",E[F].id);y(D,B==F?"0":"-1");F++});F=0;c.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",B==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});i.on("switch",e,i);if(B>-1)i.focusIndex=B;f.on(x,"keydown",t,i);f.on(x,"keypress",o,i)}}});var y=h.setTabIndex},{host:"switchable"});
KISSY.add("switchable/autoplay",function(c,h,n,l){h=c.Event;n=c.Switchable;c.mix(n.Config,{autoplay:false,interval:5,pauseOnHover:true});n.Plugins.push({name:"autoplay",init:function(o){function t(){a=c.later(function(){o.paused||o.switchTo(o.activeIndex<o.length-1?o.activeIndex+1:0,"forward")},b,true)}var r=o.config,b=r.interval*1E3,a;if(r.autoplay){if(r.pauseOnHover){h.on(o.container,"mouseenter",function(){o.stop()});h.on(o.container,"mouseleave",function(){o.start()})}t();o.stop=function(){if(a){a.cancel();
a=l}o.paused=true};o.start=function(){if(a){a.cancel();a=l}o.paused=false;t()}}}});return n},{host:"switchable"});KISSY.add("switchable/autorender",function(c,h,n,l){h=c.DOM;n=c.JSON;l=c.Switchable;l.autoRender=function(o,t){o="."+(o||"KS_Widget");h.query(o,t).each(function(r){var b=r.getAttribute("data-widget-type"),a;if(b&&"Switchable Tabs Slide Carousel Accordion".indexOf(b)>-1)try{if(a=r.getAttribute("data-widget-config"))a=a.replace(/'/g,'"');new c[b](r,n.parse(a))}catch(e){}})}},{host:"switchable"});
KISSY.add("switchable/carousel/base",function(c,h,n,l,o){function t(b,a){if(!(this instanceof t))return new t(b,a);t.superclass.constructor.apply(this,arguments)}l=c.Switchable;h=c.DOM;n=c.Event;var r={originalEvent:{target:1}};t.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};t.Plugins=[];c.extend(t,l,{_init:function(){var b=this;t.superclass._init.call(b);var a=b.config,e=a.disableBtnCls,k=false;c.each(["prev",
"next"],function(f){var m=b[f+"Btn"]=h.get("."+a[f+"BtnCls"],b.container);m&&n.on(m,"click",function(s){s.preventDefault();k||h.hasClass(m,e)||b[f](r)})});if(!a.circular){b.on("beforeSwitch",function(){k=true});b.on("switch",function(f){f=f.currentIndex;f=f===0?b.prevBtn:f===b.length-1?b.nextBtn:o;h.removeClass([b.prevBtn,b.nextBtn],e);f&&h.addClass(f,e);k=false})}n.on(b.panels,"click",function(){b.fire("itemSelected",{item:this})})}});return c.Carousel=t},{host:"switchable"});
KISSY.add("switchable/carousel/aria",function(c,h,n,l,o){function t(d){var j=d.currentIndex,g=this.completedIndex,u=this.panels,A=u[j*this.config.steps],y=this.triggers;j=y[j];if((d=!!(d.originalEvent.target||d.originalEvent.srcElement))||g==-1){c.each(y,function(i){p(i,-1)});c.each(u,function(i){p(i,-1)});j&&p(j,0);p(A,0);d&&A.focus()}}function r(d){var j;c.each(this.triggers,function(g){if(g==d||h.contains(g,d)){j=g;return false}});return j}function b(d){var j=d.target;switch(d.keyCode){case v:case s:if(j=
r.call(this,j)){j=j;var g=h.next(j),u=this.triggers;g||(g=u[0]);p(j,-1);if(g){p(g,0);g.focus()}d.halt()}break;case m:case f:if(j=r.call(this,j)){j=j;g=h.prev(j);u=this.triggers;g||(g=u[u.length-1]);p(j,-1);if(g){p(g,0);g.focus()}d.halt()}break;case q:case w:if(j=r.call(this,j)){this.switchTo(c.indexOf(j,this.triggers),undefined,z);d.halt()}}}function a(d){var j;c.each(this.panels,function(g){if(g==d||h.contains(g,d)){j=g;return false}});return j}function e(d){var j=c.indexOf(d,this.panels),g=this.config.steps,
u=Math.floor(j/g);if(u==this.activeIndex)return 1;if(j%g==0||j%g==g-1){this.switchTo(u,undefined,undefined,function(){d.focus()});return 0}return 1}function k(d){var j=d.target;switch(d.keyCode){case v:case s:if(j=a.call(this,j)){j=j;var g=h.next(j),u=this.panels;g||(g=u[0]);p(j,-1);p(g,0);e.call(this,g)&&g.focus();d.halt()}break;case m:case f:if(j=a.call(this,j)){j=j;g=h.prev(j);u=this.panels;g||(g=u[u.length-1]);p(j,-1);p(g,0);e.call(this,g)&&g.focus();d.halt()}break;case q:case w:if(j=a.call(this,
j)){this.fire("itemSelected",{item:j});d.halt()}}}h=c.DOM;n=c.Event;l=c.Switchable.Aria;o=c.Carousel;var f=37,m=38,s=39,v=40,w=32,q=13,p=l.setTabIndex,z={originalEvent:{target:1}};c.mix(o.Config,{aria:false});o.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var j=d.triggers,g=d.panels,u=d.content,A=d.activeIndex;if(!u.id)u.id=c.guid("ks-switchbale-content");u.setAttribute("role","listbox");c.each(j,function(y){p(y,A==0?"0":"-1");y.setAttribute("role","button");y.setAttribute("aria-controls",
u.id)});c.each(g,function(y){p(y,-1);y.setAttribute("role","option")});d.on("switch",t,d);(j=d.nav)&&n.on(j,"keydown",b,d);n.on(u,"keydown",k,d);j=d.prevBtn;g=d.nextBtn;if(j){p(j,0);j.setAttribute("role","button");n.on(j,"keydown",function(y){if(y.keyCode==q||y.keyCode==w){d.prev(z);y.preventDefault()}})}if(g){p(g,0);g.setAttribute("role","button");n.on(g,"keydown",function(y){if(y.keyCode==q||y.keyCode==w){d.next(z);y.preventDefault()}})}}}})},{host:"switchable"});
KISSY.add("switchable/effect",function(c,h,n,l,o,t){h=c.DOM;l=c.Anim;o=c.Switchable;var r;c.mix(o.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});o.Effects={none:function(b,a,e){b&&h.css(b,"display","none");h.css(a,"display","block");e()},fade:function(b,a,e){b&&b.length!==1&&c.error("fade effect only supports steps == 1.");var k=this,f=k.config,m=b?b[0]:null,s=a[0];if(k.anim){k.anim.stop();h.css(k.anim.fromEl,{zIndex:1,opacity:0});h.css(k.anim.toEl,{zIndex:9})}h.css(s,"opacity",
1);if(m){k.anim=(new l(m,{opacity:0},f.duration,f.easing,function(){k.anim=t;h.css(s,"z-index",9);h.css(m,"z-index",1);e&&e()},f.nativeAnim)).run();k.anim.toEl=s;k.anim.fromEl=m}else{h.css(s,"z-index",9);e&&e()}},scroll:function(b,a,e,k){var f=this;a=f.config;var m=a.effect==="scrollx",s={};s[m?"left":"top"]=-(f.viewSize[m?0:1]*k)+"px";f.anim&&f.anim.stop();if(b)f.anim=(new l(f.content,s,a.duration,a.easing,function(){f.anim=t;e&&e()},a.nativeAnim)).run();else{h.css(f.content,s);e&&e()}}};r=o.Effects;
r.scrollx=r.scrolly=r.scroll;o.Plugins.push({name:"effect",init:function(b){var a=b.config,e=a.effect,k=b.panels,f=b.content,m=a.steps,s=b.activeIndex,v=k.length;b.viewSize=[a.viewSize[0]||k[0].offsetWidth*m,a.viewSize[1]||k[0].offsetHeight*m];if(e!=="none"){c.each(k,function(z){h.css(z,"display","block")});switch(e){case "scrollx":case "scrolly":h.css(f,"position","absolute");h.css(f.parentNode,"position","relative");if(e==="scrollx"){h.css(k,"float","left");h.width(f,b.viewSize[0]*(v/m))}break;
case "fade":var w=s*m,q=w+m-1,p;c.each(k,function(z,d){p=d>=w&&d<=q;h.css(z,{opacity:p?1:0,position:"absolute",zIndex:p?9:1})})}}}});c.augment(o,{_switchView:function(b,a,e,k,f,m){var s=this,v=s.config.effect;(c.isFunction(v)?v:r[v]).call(s,b,a,function(){s._fireOnSwitch(e,f);m&&m.call(s)},e,k)}});return o},{host:"switchable"});
KISSY.add("switchable/circular",function(c,h,n,l){function o(q,p,z,d,j){var g=this;q=g.config;p=g.length;var u=g.activeIndex,A=q.scrollType===w,y=A?e:k,i=g.viewSize[A?0:1];A=-i*d;var x={},B,C=j===v;if(B=C&&u===0&&d===p-1||j===s&&u===p-1&&d===0)A=t.call(g,g.panels,d,C,y,i);x[y]=A+m;g.anim&&g.anim.stop();g.anim=(new n(g.content,x,q.duration,q.easing,function(){B&&r.call(g,g.panels,d,C,y,i);g.anim=undefined;z()},q.nativeAnim)).run()}function t(q,p,z,d,j){var g=this.config.steps;p=this.length;var u=z?
p-1:0,A=(u+1)*g;for(g=u*g;g<A;g++){h.css(q[g],b,a);h.css(q[g],d,(z?-1:1)*j*p)}return z?j:-j*p}function r(q,p,z,d,j){var g=this.config.steps;p=this.length;var u=z?p-1:0,A=(u+1)*g;for(g=u*g;g<A;g++){h.css(q[g],b,f);h.css(q[g],d,f)}h.css(this.content,d,z?-j*(p-1):f)}h=c.DOM;n=c.Anim;l=c.Switchable;var b="position",a="relative",e="left",k="top",f="",m="px",s="forward",v="backward",w="scrollx";c.mix(l.Config,{circular:false});l.Plugins.push({name:"circular",init:function(q){q=q.config;if(q.circular&&(q.effect===
w||q.effect==="scrolly")){q.scrollType=q.effect;q.effect=o}}})},{host:"switchable"});
KISSY.add("switchable/countdown",function(c,h,n,l,o,t){h=c.DOM;n=c.Event;l=c.Anim;o=c.Switchable;c.mix(o.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});o.Plugins.push({name:"countdown",init:function(r){function b(q){a();w=(new l(m[q],v,f-1)).run()}function a(){if(k){clearTimeout(k);k=null}if(w){w.stop();w=t}}var e=r.config,k,f=e.interval,m=[],s=e.countdownFromStyle,v=e.countdownToStyle,w;if(!(!e.autoplay||!e.hasTriggers||!e.countdown)){c.each(r.triggers,function(q,p){q.innerHTML=
'<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+q.innerHTML+"</div>";m[p]=q.firstChild});if(e.pauseOnHover){n.on(r.container,"mouseenter",function(){a();var q=m[r.activeIndex];if(s)w=(new l(q,s,0.2,"easeOut")).run();else h.removeAttr(q,"style")});n.on(r.container,"mouseleave",function(){a();var q=r.activeIndex;h.removeAttr(m[q],"style");k=setTimeout(function(){b(q)},200)})}r.on("beforeSwitch",function(){a();if(r.activeIndex>-1)h.attr(m[r.activeIndex],"style",
s||"")});r.on("switch",function(q){r.paused||b(q.currentIndex)})}}});return o},{host:"switchable"});
KISSY.add("switchable/lazyload",function(c,h,n){h=c.DOM;n=c.Switchable;var l="beforeSwitch",o="img-src",t="area-data",r={};r[o]="data-ks-lazyload-custom";r[t]="ks-datalazyload-custom";c.mix(n.Config,{lazyDataType:t});n.Plugins.push({name:"lazyload",init:function(b){function a(s){var v=k.steps;s=s.toIndex*v;e.loadCustomLazyData(b.panels.slice(s,s+v),f);a:{var w,q;if(s=(v=f===o)?"img":f===t?"textarea":""){s=h.query(s,b.container);w=0;for(q=s.length;w<q;w++)if(v?h.attr(s[w],m):h.hasClass(s[w],m)){v=
false;break a}}v=true}v&&b.detach(l,a)}var e=c.DataLazyload,k=b.config,f=k.lazyDataType,m=r[f];!e||!f||!m||b.on(l,a)}});return n},{host:"switchable"});KISSY.add("switchable/slide/base",function(c,h){function n(l,o){if(!(this instanceof n))return new n(l,o);n.superclass.constructor.apply(this,arguments);return 0}h=c.Switchable;n.Config={autoplay:true,circular:true};n.Plugins=[];c.extend(n,h);return c.Slide=n},{host:"switchable"});
KISSY.add("switchable/slide/aria",function(c,h,n,l,o){function t(m){switch(m.keyCode){case e:case a:this.next(k);m.halt();break;case b:case r:this.prev(k);m.halt()}}l=c.Switchable;h=c.DOM;n=c.Event;l=l.Aria;o=c.Slide;var r=37,b=38,a=39,e=40;c.mix(o.Config,{aria:false});var k={originalEvent:{target:1}},f=l.setTabIndex;o.Plugins.push({name:"aria",init:function(m){if(m.config.aria){var s=m.panels,v=0,w=m.activeIndex;c.each(m.triggers,function(p){f(p,"-1");v++});v=0;c.each(s,function(p){f(p,w==v?"0":
"-1");h.attr(p,"role","option");v++});var q=m.content;h.attr(q,"role","listbox");n.on(q,"keydown",t,m);f(s[0],0);m.on("switch",function(p){var z=!!(p.originalEvent.target||p.originalEvent.srcElement);p=p.currentIndex;var d=m.completedIndex;d>-1&&f(s[d],-1);f(s[p],0);z&&s[p].focus()})}}})},{host:"switchable"});
KISSY.add("switchable/tabs/base",function(c,h){function n(l,o){if(!(this instanceof n))return new n(l,o);n.superclass.constructor.call(this,l,o);return 0}h=c.Switchable;c.extend(n,h);n.Config={};n.Plugins=[];return c.Tabs=n},{host:"switchable"});
KISSY.add("switchable/tabs/aria",function(c,h,n){function l(d){var j;c.each(this.triggers,function(g){if(g==d||e.contains(g,d))j=g});return j}function o(d){switch(d.keyCode){case k:case f:d.ctrlKey&&!d.altKey&&!d.shiftKey&&d.halt();break;case q:d.ctrlKey&&!d.altKey&&d.halt()}}function t(d){var j=d.target,g=d.ctrlKey&&!d.shiftKey&&!d.altKey;switch(d.keyCode){case m:case s:if(l.call(this,j)){this.prev(p(d));d.halt()}break;case v:case w:if(l.call(this,j)){this.next(p(d));d.halt()}break;case f:if(g){d.halt();
this.next(p(d))}break;case k:if(g){d.halt();this.prev(p(d))}break;case q:if(d.ctrlKey&&!d.altKey){d.halt();d.shiftKey?this.prev(p(d)):this.next(p(d))}}}function r(d){var j=!!(d.originalEvent.target||d.originalEvent.srcElement),g=this.completedIndex,u=d.currentIndex;if(g!=u){d=this.triggers[g];var A=this.triggers[u];g=this.panels[g];u=this.panels[u];d&&z(d,"-1");z(A,"0");j&&A.focus();g&&g.setAttribute("aria-hidden","true");u.setAttribute("aria-hidden","false")}}var b=c.Switchable;h=b.Aria;n=c.Tabs;
var a=c.Event,e=c.DOM,k=33,f=34,m=37,s=38,v=39,w=40,q=9;c.mix(n.Config,{aria:false});var p=b.getDomEvent;n.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var j=d.triggers,g=d.activeIndex,u=d.panels,A=d.container;d.nav&&e.attr(d.nav,"role","tablist");var y=0;c.each(j,function(i){i.setAttribute("role","tab");z(i,g==y?"0":"-1");if(!i.id)i.id=c.guid("ks-switchable");y++});y=0;c.each(u,function(i){var x=j[y];i.setAttribute("role","tabpanel");i.setAttribute("aria-hidden",g==y?"false":"true");
i.setAttribute("aria-labelledby",x.id);y++});d.on("switch",r,d);a.on(A,"keydown",t,d);a.on(A,"keypress",o,d)}}});var z=h.setTabIndex},{host:"switchable"});/*
Copyright 2010, KISSY UI Library v1.1.6
MIT Licensed
build time: Dec 14 18:01
*/
KISSY.add("datalazyload",function(c,r){function i(a,b){if(!(this instanceof i))return new i(a,b);if(b===r){b=a;a=[m]}c.isArray(a)||(a=[c.get(a)||m]);this.containers=a;this.config=c.merge(s,b);this.callbacks={els:[],fns:[]};this._init()}var f=c.DOM,k=c.Event,l=window,m=document,n="scroll",o="resize",s={mod:"manual",diff:"default",placeholder:"none"};c.augment(i,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._initLoadEvent()},_filterItems:function(){var a=this.containers,
b,d,e,h=[],g=[];b=0;for(d=a.length;b<d;++b){e=c.query("img",a[b]);h=h.concat(c.filter(e,this._filterImg,this));e=c.query("textarea",a[b]);g=g.concat(c.filter(e,this._filterArea,this))}this.images=h;this.areaes=g},_filterImg:function(a){var b=a.getAttribute("data-ks-lazyload"),d=this.threshold,e=this.config.placeholder;if(this.config.mod==="manual"){if(b){if(e!=="none")a.src=e;return true}}else if(f.offset(a).top>d&&!b){f.attr(a,"data-ks-lazyload",a.src);if(e!=="none")a.src=e;else a.removeAttribute("src");
return true}},_filterArea:function(a){return f.hasClass(a,"ks-datalazyload")},_initLoadEvent:function(){function a(){d||(d=c.later(function(){b();d=null},100))}function b(){e._loadItems();if(e._getItemsLength()===0){k.remove(l,n,a);k.remove(l,o,h)}}var d,e=this,h;k.on(l,n,a);k.on(l,o,h=function(){e.threshold=e._getThreshold();a()});e._getItemsLength()&&c.ready(function(){b()})},_loadItems:function(){this._loadImgs();this._loadAreas();this._fireCallbacks()},_loadImgs:function(){this.images=c.filter(this.images,
this._loadImg,this)},_loadImg:function(a){var b=this.threshold+f.scrollTop();if(f.offset(a).top<=b)this._loadImgSrc(a);else return true},_loadImgSrc:function(a,b){b=b||"data-ks-lazyload";var d=a.getAttribute(b);if(d&&a.src!=d){a.src=d;a.removeAttribute(b)}},_loadAreas:function(){this.areaes=c.filter(this.areaes,this._loadArea,this)},_loadArea:function(a){var b=f.css(a,"display")==="none";if(f.offset(b?a.parentNode:a).top<=this.threshold+f.scrollTop())this._loadAreaData(a.parentNode,a);else return true},
_loadAreaData:function(a,b){b.style.display="none";b.className="";var d=f.create("<div>");a.insertBefore(d,b);f.html(d,b.value,true)},_fireCallbacks:function(){var a=this.callbacks,b=a.els,d=a.fns,e=this.threshold+f.scrollTop(),h,g,j,p=[],q=[];for(h=0;(g=b[h])&&(j=d[h++]);)if(f.offset(g).top<=e)j.call(g);else{p.push(g);q.push(j)}a.els=p;a.fns=q},addCallback:function(a,b){var d=this.callbacks;if((a=c.get(a))&&c.isFunction(b)){d.els.push(a);d.fns.push(b)}},_getThreshold:function(){var a=this.config.diff,
b=f.viewportHeight();return a==="default"?2*b:b+ +a},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(a,b){var d=this,e,h;c.isArray(a)||(a=[c.get(a)]);c.each(a,function(g){switch(b){case "img-src":h=g.nodeName==="IMG"?[g]:c.query("img",g);c.each(h,function(j){d._loadImgSrc(j,"data-ks-lazyload-custom")});break;default:(e=c.get("textarea",g))&&f.hasClass(e,"ks-datalazyload-custom")&&d._loadAreaData(g,e)}})}});c.mix(i,i.prototype,
true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);c.DataLazyload=i},{requires:["core"]});/*
Copyright 2010, KISSY UI Library v1.1.6
MIT Licensed
build time: Dec 14 18:01
*/
KISSY.add("ajax",function(d,B){function i(a){a=d.merge(J,a);if(a.url){if(a.data&&!d.isString(a.data))a.data=d.param(a.data);a.context=a.context||a;var b,e=n,g,f=a.type.toUpperCase();if(a.dataType===w){b=a.jsonpCallback||w+d.now();a.url=a.url+(a.url.indexOf("?")===-1?"?":"&")+(a.jsonp+"="+b);a.dataType=C;var o=j[b];j[b]=function(k){if(d.isFunction(o))o(k);else{j[b]=B;try{delete j[b]}catch(h){}}p([n,q],k,e,c,a)}}if(a.data&&f===x)a.url=a.url+(a.url.indexOf("?")===-1?"?":"&")+a.data;if(a.dataType===C){l(D,
a);f=d.getScript(a.url,b?null:function(){p([n,q],t,e,c,a)});l(E,a);return f}var r=false,c=a.xhr();l(D,a);c.open(f,a.url,a.async);try{if(a.data||a.contentType)c.setRequestHeader(F,a.contentType);c.setRequestHeader("Accept",a.dataType&&a.accepts[a.dataType]?a.accepts[a.dataType]+", */*; q=0.01":a.accepts._default)}catch(L){}c.onreadystatechange=function(k){if(!c||c.readyState===0||k==="abort"){r||p(q,null,s,c,a);r=true;if(c)c.onreadystatechange=G}else if(!r&&c&&(c.readyState===4||k===u)){r=true;c.onreadystatechange=
G;var h;if(k===u)h=u;else{a:{try{h=c.status>=200&&c.status<300||c.status===304||c.status===1223;break a}catch(M){}h=false}h=h?n:s}e=h;try{h=c;var v=a.dataType,y=t,H,m=h;if(!d.isString(m)){y=h.getResponseHeader(F)||t;m=(H=v==="xml"||!v&&y.indexOf("xml")>=0)?h.responseXML:h.responseText;if(H&&m.documentElement.nodeName===z)throw z;}if(d.isString(m))if(v===A||!v&&y.indexOf(A)>=0)m=d.JSON.parse(m);g=m}catch(N){e=z}p([e===n?n:s,q],g,e,c,a);if(k===u){c.abort();l(K,a)}if(a.async)c=null}};l(E,a);try{c.send(f===
I?a.data:null)}catch(O){p([s,q],g,s,c,a)}a.async||l(q,a);return c}}function p(a,b,e,g,f){if(d.isArray(a))d.each(a,function(o){p(o,b,e,g,f)});else{e===a&&f[a]&&f[a].call(f.context,b,e,g);l(a,f)}}function l(a,b){i.fire(a,{ajaxConfig:b})}var j=window,G=function(){},x="GET",I="POST",F="Content-Type",A="json",w=A+"p",C="script",t="",D="start",E="send",K="stop",n="success",q="complete",s="error",u="timeout",z="parsererror",J={type:x,url:t,contentType:"application/x-www-form-urlencoded",async:true,data:null,
xhr:j.ActiveXObject?function(){if(j.XmlHttpRequest)try{return new j.XMLHttpRequest}catch(a){}try{return new j.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}:function(){return new j.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},jsonp:"callback"};d.mix(i,d.EventTarget);d.mix(i,{get:function(a,b,e,g,f){if(d.isFunction(b)){g=e;e=b}return i({type:f||x,
url:a,data:b,success:function(o,r,c){e&&e.call(this,o,r,c)},dataType:g})},post:function(a,b,e,g){if(d.isFunction(b)){g=e;e=b;b=B}return i.get(a,b,e,g,I)},jsonp:function(a,b,e){if(d.isFunction(b)){e=b;b=null}return i.get(a,b,e,w)}});i.getScript=d.getScript;d.io=d.ajax=i.ajax=i;d.jsonp=i.jsonp;d.IO=i});