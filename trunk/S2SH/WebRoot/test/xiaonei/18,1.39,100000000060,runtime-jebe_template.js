var jebe_template =
 [{"widget_id":"18","widget_version":"1.39","widget_view":"runtime","html":"\n                \n\t\t\t\t\n     
 
                  <div class=\"side-item sponsors\">\n\t\t\t\t\t <div class=\"side-item-header clearfix\">\n\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t<a id=\"##PLACEHOLDER##title\" href=\"#nogo\" target=\"_blank\">标题<\/a>\n\t\t\t\t\t\t<\/h4>\n\t\t\t\t\t\t<div class=\"option\"> \n\t\t\t\t\t\t\t<a id=\"##PLACEHOLDER##more\" class=\"link\" href=\"#nogo\" target=\"_blank\" style=\"display:none\">更多<\/a> \n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"side-item-body clearfix\">\n\t\t\t\t\t\t<div class=\"figure\"> \n\t\t\t\t\t\t\t<a id=\"##PLACEHOLDER##picClickUrl\" class=\"link\" href=\"#nogo\" target=\"_blank\"><img id=\"##PLACEHOLDER##pic\" height=\"80\" width=\"100\"/><\/a> \n\t\t\t\t\t\t<\/div>\n                         <div class=\"info\"> \n\t\t\t\t\t\t\t<p> \n\t\t\t\t\t\t\t\t<a class=\"text\" href=\"#url\" target=\"_blank\" id=\"##PLACEHOLDER##docClickUrl\" style=\"color:#333333\">广告文案区域<\/a>\n\t\t\t\t\t\t\t<\/p> \n\t\t\t\t\t\t\t<p> \n\t\t\t\t\t\t\t\t<a class=\"link\" href=\"#url\" target=\"_blank\" id=\"##PLACEHOLDER##docMoreUrl\"><\/a>\n\t\t\t\t\t\t\t<\/p> \n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<input type=\"hidden\" id=\"##PLACEHOLDER##response\"/>\n                        \n\t\t\t\t\t\t<div class=\"footer\">\t\n\t\t\t\t\t\t\t<div id=\"##PLACEHOLDER##info\" class=\"fans\">\n\t\t\t\t\t\t\t\t\t<span id= \"##PLACEHOLDER##info1\"><\/span>\n\t\t\t\t\t\t\t\t\t<span id= \"##PLACEHOLDER##friendList\"><\/span>\n\t\t\t\t\t\t\t\t\t<span id= \"##PLACEHOLDER##info2\"><\/span>\n\t\t\t\t\t\t\t\t<\/div>\n                            <a id=\"##PLACEHOLDER##aFans\" class=\"link\" href=\"#nogo\" target=\"_blank\"><img class=\"sw_button_img\" src=\"http://jebe.xnimg.cn/default/follow-button.gif\"><\/a>\n                            <a id=\"##PLACEHOLDER##aShare\" class=\"link\" href=\"#nogo\"><img class=\"sw_button_img\" src=\"http://jebe.xnimg.cn/default/img/sw_share_button.png\"><\/a>\n                        <\/div>\n\t\t\t\t\t<\/div>\n                                        <\/div>\n\t\t\t\t\n        ","js":"\n\t\t\t\t\t\n\t\t\t\t\t\tvar init = function (data, adparam, query) {\n\t\t\t\t\t\t\tvar engineUrl = adparam.click_url;\n\t\t\t\t\t\t\tvar title = query.getElementById('title');\n\t\t\t\t\t\t\ttitle.innerHTML = data.title;\n\t\t\t\t\t\t\ttitle.href = geneRealClickUrl(data.titleClickUrl,'abflag=title', engineUrl);\n\t\t\t\t\t\t\tvar more = query.getElementById('more');\n\t\t\t\t\t\t\tif (data.hasMore) {\n\t\t\t\t\t\t\t\tmore.href = geneRealClickUrl(data.moreClickUrl,'abflag=more', engineUrl);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmore.style.display = 'none';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar picClickUrl = query.getElementById('picClickUrl');\n\t\t\t\t\t\t\tpicClickUrl.href = geneRealClickUrl(data.hasPicClickUrl ? data.picClickUrl:data.titleClickUrl, 'abflag=pic', engineUrl);\n\t\t\t\t\t\t\tvar pic = query.getElementById('pic');\n\t\t\t\t\t\t\tpic.src = geneMediaUrl(data.picUrl);\n\n\t\t\t\t\t\t\tvar docClickUrl = query.getElementById('docClickUrl');\n\t\t\t\t\t\t\tdocClickUrl.href = geneRealClickUrl(data.hasDocClickUrl ? data.docClickUrl:data.titleClickUrl, 'abflag=text', engineUrl);\n                                                        docClickUrl.innerHTML = data.adDoc;                                                        \n        \n                            if(data.hasDocMore){\n                                query.getElementById('docMoreUrl').innerHTML=data.docMoreTitle;\n                                if(data.hasDocMoreLink) query.getElementById('docMoreUrl').href=geneRealClickUrl(data.docMoreLink,'abflag=title', engineUrl);\n                                else query.getElementById('docMoreUrl').href=geneRealClickUrl(data.titleClickUrl,'abflag=title', engineUrl);                        \n                            } \n\n\t\t\t\t\t\t\tvar aShare = query.getElementById('aShare');\n\t\t\t\t\t\t\tif (data.hasShare) {\n\t\t\t\t\t\t\t\tsendNielsen(data.nielsen,2); \n\t\t\t\t\t\t\t\tif (window['create_share_jebe']) {\n\t\t\t\t\t\t\t\t\taShare.onclick = function () {\n\t\t\t\t\t\t\t\t\t\t//create_share_jebe({\"type\":52,\"link\":data.edmUrl,\"title\":\"tst\",\"adcode\":adparam.creative_id},'http://rest.widgetbox.jebe.renren.com/widgetboxs/rest/share.htm');\n\t\t\t\t\t\t\t\t\t\tsendNielsen(data.nielsen,3); \n\t\t\t\t\t\t\t\t\t\t//create_share_jebe({\"type\":51,\"link\":data.edmUrl,\"title\":\"tst\",\"adcode\":data.edmID},'http://rest.widgetbox.jebe.renren.com/widgetboxs/rest/share.htm');\n                                        create_share_popup({\"type\":51,\"link\":data.edmUrl,\"title\":\"tst\",\"adcode\":data.edmID});\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taShare.style.display = 'none';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar link = getPageUrl(data.pageid);\n\t\t\t\t\t\t\tvar aFans = query.getElementById('aFans');\n\t\t\t\t\t\t\taFans.href = geneRealClickUrl(link,'abflag=button', engineUrl);\n                            aFans.onclick = function(){\n                                sendNielsen(data.nielsen,1);\n                                var userID = XN.cookie.get( 'id' );\n                                if(userID == ''){\n                                    window.open(link);  \n                                }\n                                var dd = new JebeApi.RestRequests(adparam.creative_id,'','');\n                                var map = {userID:userID,creativeID:adparam.creative_id,link:geneRealClickUrl(link,'abflag=button', engineUrl)};\n                                dd.add(JebeApi.ActionRequest.becomeFansRequest({map:map},'result',false));\n                                dd.send(function(response){\n                                    var result = eval(response.responseText);\n                                    //query.getElementById('aFans').style.display = 'none';  \n                                },function(){});\n                            };\n\n\t\t\t\t\t\t\t//var userID = XN.cookie.get( 'id' );\n                            var userID = '';\n                            if(userID == ''){return;}\n                            var dd = new JebeApi.RestRequests(adparam.creative_id,'','');\n                                dd.add(JebeApi.PersonRequest.getFriendListByIsFans({userID:userID,pageID:data.pageid},'result',false));\n                                dd.add(JebeApi.ActionRequest.getFansCount({pageID:data.pageid},'result',false));\n                                dd.add(JebeApi.ActionRequest.isFans({userID:userID,pageID:data.pageid},'result',false));\n                                dd.add(JebeApi.ActionRequest.getPageName({pageID:data.pageid},'result',false));\n                                dd.send(function(response){\n                                    var result = eval(response.responseText);\n                                    var isFansWord = '';\n                                    var fansCount = result[1].result;\n                                    var friendCount = result[0].result.length;\n                                    var name = result[3].result\n                                    if(result[2].result == true){\n                                        fansCount = fansCount -1 ;\n                                        if(XN.browser.IE && friendCount > 0) isFansWord ='我和&nbsp;';\n                                        else isFansWord ='我和';                                    \n                                    }\n                                    if(friendCount > 0){\n                                        query.getElementById('response').value=response.responseText;\n                                        //query.getElementById('info1').innerHTML = isFansWord+'<a  href=\\'javascript:void(0);\\'>'+friendCount+'<\/a>个好友';\n                                        query.getElementById('info1').innerHTML = isFansWord;\n                                        /*query.getElementById('info1').firstChild.nextSibling.onclick= function(){\n                                             showFriendInfo(query,result[0].result,1,5,true) ;  \n                                        };*/\n                                         showFriendInfo(query,result[0].result,1,3,false) ;\n                                        query.getElementById('info2').innerHTML =(fansCount>3 ?'等' : '')+fansCount+'人已成为&nbsp;<a target=\\'_blank\\' href=\\''+geneRealClickUrl(getPageUrl(data.pageid),'abflag=title', engineUrl)+'\\'>'+name+'<\/a>&nbsp;的粉丝';\n                                    }else{\n                                        var info = isFansWord+fansCount+'人已成为&nbsp;<a target=\\'_blank\\' href=\\''+geneRealClickUrl(getPageUrl(data.pageid),'abflag=title', engineUrl)+'\\'>'+name+'<\/a>&nbsp;的粉丝';\n                                        query.getElementById('info').innerHTML = info;\n                                    }\n                                    \n                                },function(){});\n                            };\n\t\t\t\t\t\t\n\t\t\t\t\t\t/*分页显示好友信息*/\n                        var showFriendInfo = function(query,friends,pageid,size,paging){\n                            if(pageid == 0 || size == 0){return '';}\n                            var result = '';\n                            if(friends && friends.length > 0){\n                                var start = 0\n                                var end = friends.length-1;\n                                start = (pageid-1) * size;\n                                if(start > end){return '';}\n                                end = start + size - 1; \n                                if(end > friends.length-1){end = friends.length-1}\n                                for(var i = start; i<end+1; i++){\n                                       result += '<a target=\\'_blank\\' href=\\''+getFriendLink(friends[i].userID)+'\\'>'+friends[i].name.substr(0,3)+'<\/a>';  \n                                        if(i != end) {result+=\"&nbsp;\";}                                                       \n                                }\n                                if(paging){\n                                    if(start > 1){result = '<a href=\\'javascript:void(0)\\'>《<\/a>'+result;} \n                                    if(end < friends.length-1){result+='<a href=\\'javascript:void(0)\\' >》<\/a>';}                        \n                                }\n                            }\n                            var friendList = query.getElementById('friendList');\n                            if(XN.browser.IE)\n                                friendList.innerHTML = result+'&nbsp;';\n                            else\n                                friendList.innerHTML = result;\n                            if(friendList.firstChild.target != '_blank'){\n                                if(friendList.firstChild.onclick){\n                                        friendList.firstChild.onclick = function(){\n                                            showFriendInfo(query,friends,pageid-1,size,true);\n                                        }\n                                }\n                            }\n                            if(friendList.lastChild.target != '_blank'){\n                                if(friendList.lastChild.onclick){\n                                        friendList.lastChild.onclick = function(){\n                                            showFriendInfo(query,friends,pageid+1,size,true);\n                                        }\n                                }\n                            }\n                            \n                        }; \n\t\t\t\t\t\t /*生成好友首页的链接*/\n                        var getFriendLink = function(userID){\n                            return 'http://www.renren.com/profile.do?id='+userID+'&ref=suggest_people_common_friends_to_profile';\n                        };\n\n\t\t\t\t\t\tvar getPageUrl = function(pageid){\n                                return 'http://page.renren.com/pa/bf?pid='+pageid+'&psid=678&pstype=1&ref=slink&abflag=button';\n                        }\n\n\t\t\t\t\t\tvar dealName = function(name,id){\n\t\t\t\t\t\t\tif(name.length > 3){name=name.substr(0,3);}\n\t\t\t\t\t\t\tname = \"<a href='http://www.renren.com/profile.do?id=\"+id+\"' target='_blank'>\"+name+\"<\/a>\";\n\t\t\t\t\t\t\treturn name;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar geneRealClickUrl = function(url, param, engineUrl) {\n                            if (url.indexOf('?') >= 0) {\n                                    url = url + '&' + param;\n                            } else {\n                                    url =  url + '?' + param;\n                            }\n                            if (engineUrl != '') {\n                                return  engineUrl +  encodeURIComponent(makeUrl(url));\n                            } else {\n                                return  makeUrl(url);\n                            }\n                         };\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar geneMediaUrl = function(raw) {\n\t\t\t\t\t\t\treturn 'http://jebe.xnimg.cn' + raw.replace('http://jebe.xnimg.cn', '');\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar makeUrl = function (raw) {\n\t\t\t\t\t\t\treturn 'http://' + raw.replace('http://','');\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar sendNielsen = function(nielsen,type){\n\t\t\t\t\t\t\t//return;\n\t\t\t\t\t\t\tif(!nielsen){return;}\n\t\t\t\t\t\t\tvar cg = '';\n\t\t\t\t\t\t\tvar si = '';\n\t\t\t\t\t\t\tif(nielsen == 1){cg = 'reiz';}\n\t\t\t\t\t\t\tif(nielsen == 2){cg = 'nike';}\n\t\t\t\t\t\t\tif(nielsen == 3){cg = 'dell';}\n\t\t\t\t\t\t\tif(type == 1){si = 'widget/fans/click';}\n\t\t\t\t\t\t\tif(type == 2){si = 'widget/share/imp';}\n\t\t\t\t\t\t\tif(type == 3){si = 'widget/share/click';}\n\t\t\t\t\t\t\tif(type == 4){si = 'widget/participate/imp';}\n\t\t\t\t\t\t\tvar url = 'http://secure-cn.imrworldwide.com/cgi-bin/m?ci=cn-renren2010&cg='+cg+'&cc=1&si='+si; \n\t\t\t\t\t\t\tvar img = document.createElement('img');\n\t\t\t\t\t\t\timg.src=url;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\n                ","placeholder":"##PLACEHOLDER##","adzone_id":"100000000060"}]